install.packages("tidycensus")
knitr::opts_chunk$set(echo = TRUE)
library(sf)
library(tidycensus)
library(tidyverse)
census_api_key("049996ddd2d71a26e8f97e615d270891f7b518f5")
census_api_key("049996ddd2d71a26e8f97e615d270891f7b518f5", install = T)
readRenviron("~/.Renviron")
maricopa_2018 <- get_acs(geography = c("tract", "county"),
state = "AZ",
year = 2018,
variables = c(medincome = "B19013_001"))
maricopa_2018 <- get_acs(geography = "tract",
state = "AZ",
year = 2018,
variables = c(medincome = "B19013_001"))
View(maricopa_2018)
?get_acs
maricopa_2018 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2018,
variables = c(medincome = "B19013_001"))
View(maricopa_2018)
maricopa_2018 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2018,
variables = c(med_income = "B19013_001", med_age = "B01002_001"))
View(maricopa_2018)
variables <- load_variables(2018, "acs5", cache = T)
View(variables)
# 2019
maricopa_basics_2019 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2019,
variables = c(med_income = "B19013_001", med_age = "B01002_001", total_pop = "B00001_001"))
# 2018
maricopa_basics_2018 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2018,
variables = c(med_income = "B19013_001", med_age = "B01002_001", total_pop = "B00001_001"))
maricopa_demographics_2018 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2018,
variables = c(white = "B03002_003", hispanic = "B03002_012", black = "B03002_004",
asian = "B03002_006", native = "B03002_005"))
maricopa_demographics_2019 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2019,
variables = c(white = "B03002_003", hispanic = "B03002_012", black = "B03002_004",
asian = "B03002_006", native = "B03002_005"))
variables <- load_variables(2019, "acs5", cache = T)
variables <- load_variables(2019, cache = T)
variables <- load_variables(2019, "sf3", cache = T)
variables <- load_variables(2019, "acs3", cache = T)
variables <- load_variables(2019, "acs1", cache = T)
View(variables)
# 2019
maricopa_basics_2019 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2019,
variables = c(med_income = "B06011_001", med_age = "B01002_001", total_pop = "B01001_001"))
# 2019
maricopa_basics_2019 <- get_acs(geography = "tract",
survey = "acs1",
state = "AZ",
county = "Maricopa",
year = 2019,
variables = c(med_income = "B06011_001", med_age = "B01002_001", total_pop = "B01001_001"))
maricopa_basics_2017 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2017,
variables = c(med_income = "B19013_001", med_age = "B01002_001", total_pop = "B00001_001"))
maricopa_demographics_2017 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2017,
variables = c(white = "B03002_003", hispanic = "B03002_012", black = "B03002_004",
asian = "B03002_006", native = "B03002_005"))
View(maricopa_demographics_2017)
# 2016
maricopa_basics_2018 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2016,
variables = c(med_income = "B19013_001", med_age = "B01002_001", total_pop = "B00001_001"))
maricopa_demographics_2018 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2016,
variables = c(white = "B03002_003", hispanic = "B03002_012", black = "B03002_004",
asian = "B03002_006", native = "B03002_005"))
# 2015
maricopa_basics_2017 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2015,
variables = c(med_income = "B19013_001", med_age = "B01002_001", total_pop = "B00001_001"))
maricopa_demographics_2017 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2015,
variables = c(white = "B03002_003", hispanic = "B03002_012", black = "B03002_004",
asian = "B03002_006", native = "B03002_005"))
# # 2019
# maricopa_basics_2019 <- get_acs(geography = "tract",
#                                 survey = "acs1",
#                                 state = "AZ",
#                                 county = "Maricopa",
#                                 year = 2019,
#                                 variables = c(med_income = "B06011_001", med_age = "B01002_001", total_pop = "B01001_001"))
# maricopa_demographics_2019 <- get_acs(geography = "tract",
#                                       state = "AZ",
#                                       county = "Maricopa",
#                                       year = 2019,
#                                       variables = c(white = "B03002_003", hispanic = "B03002_012", black = "B03002_004",
#                                                     asian = "B03002_006", native = "B03002_005"))
# 2018
maricopa_basics_2018 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2018,
variables = c(med_income = "B19013_001", med_age = "B01002_001", total_pop = "B00001_001"))
maricopa_demographics_2018 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2018,
variables = c(white = "B03002_003", hispanic = "B03002_012", black = "B03002_004",
asian = "B03002_006", native = "B03002_005"))
# 2017
maricopa_basics_2017 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2017,
variables = c(med_income = "B19013_001", med_age = "B01002_001", total_pop = "B00001_001"))
maricopa_demographics_2017 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2017,
variables = c(white = "B03002_003", hispanic = "B03002_012", black = "B03002_004",
asian = "B03002_006", native = "B03002_005"))
# 2016
maricopa_basics_2016 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2016,
variables = c(med_income = "B19013_001", med_age = "B01002_001", total_pop = "B00001_001"))
maricopa_demographics_2016 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2016,
variables = c(white = "B03002_003", hispanic = "B03002_012", black = "B03002_004",
asian = "B03002_006", native = "B03002_005"))
# 2015
maricopa_basics_2015 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2015,
variables = c(med_income = "B19013_001", med_age = "B01002_001", total_pop = "B00001_001"))
maricopa_demographics_2015 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2015,
variables = c(white = "B03002_003", hispanic = "B03002_012", black = "B03002_004",
asian = "B03002_006", native = "B03002_005"))
# 2014
maricopa_basics_2018 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2014,
variables = c(med_income = "B19013_001", med_age = "B01002_001", total_pop = "B00001_001"))
maricopa_demographics_2018 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2014,
variables = c(white = "B03002_003", hispanic = "B03002_012", black = "B03002_004",
asian = "B03002_006", native = "B03002_005"))
# 2013
maricopa_basics_2013 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2013,
variables = c(med_income = "B19013_001", med_age = "B01002_001", total_pop = "B00001_001"))
maricopa_demographics_2013 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2013,
variables = c(white = "B03002_003", hispanic = "B03002_012", black = "B03002_004",
asian = "B03002_006", native = "B03002_005"))
# 2012
maricopa_basics <- sapply(2011:2012, function(x){
df <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = x,
variables = c(med_income = "B19013_001", med_age = "B01002_001", total_pop = "B00001_001"))
df <- df %>%
mutate(year = x)
df
})
View(maricopa_basics)
maricopa_basics_2012 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2012,
variables = c(med_income = "B19013_001", med_age = "B01002_001", total_pop = "B00001_001"))
maricopa_demographics_2012 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2012,
variables = c(white = "B03002_003", hispanic = "B03002_012", black = "B03002_004",
asian = "B03002_006", native = "B03002_005"))
knitr::opts_chunk$set(echo = TRUE)
library(sf)
library(tidycensus)
library(tidyverse)
# 2018
maricopa_basics_2018 <- get_acs(geography = "tract",
state = "AZ",
county = "Maricopa",
year = 2018,
geometry = T,
variables = c(med_income = "B19013_001", med_age = "B01002_001", total_pop = "B00001_001"))
View(maricopa_basics_2018)
install.packages("mapboxapi")
install.packages("fasterize")
my_token <- "pk.eyJ1Ijoid2VzdGVybGV5eSIsImEiOiJja2JrOWZ5NGYwa3d2MnlwZ3RwMW1xdjUzIn0.l2xVZDgKTA0VKYYbQrUhrg"
library(mapboxapi)
mb_access_token(my_token, install = T)
View(maricopa_basics_2012)
View(maricopa_demographics_2012)
library(tidyverse)
maricopa_2012_results <- read_csv("Maricopa_2012.txt")
View(maricopa_2012_results)
maricopa_2014_results <- read_delim("Maricopa_2014.txt", delim = " ")
?read_lim
?read_delim
maricopa_2014_results <- read_tsv("Maricopa_2014.txt")
maricopa_2016_results <- read_tsv("Maricopa_2016.txt")
maricopa_2018_results <- read_tsv("Maricopa_2018.txt")
View(maricopa_2012_results)
congress_filter <- function(df){
congress_races <- df %>%
filter(str_detect(CONTEST_FULL_NAME, "US Rep Dst"))
congress_races
}
maricopa_2012_congress <- congress_filter(maricopa_2012_results)
View(maricopa_2012_congress)
View(maricopa_2018_results)
congress_races
congress_filter <- function(df){
congress_races <- df %>%
filter(str_detect(CONTEST_FULL_NAME, "US Rep Dst")) %>%
select(PRECINCT_NAME, CANDIDATE_FULL_NAME, candidate_party_id, CONTEST_FULL_NAME, TOTAL, PRECINCT_ID, TOTAL, CONTEST_TOTAL)
congress_races
}
maricopa_2012_congress <- congress_filter(maricopa_2012_results)
View(maricopa_2012_congress)
maricopa_2014_congress <- congress_filter(maricopa_2014_results)
n_distinct(maricopa_2014_congress$PRECINCT_NAME)
n_distinct(maricopa_2012_congress$PRECINCT_NAME)
maricopa_2018_congress <- congress_filter(maricopa_2018_results)
maricopa_2016_congress <- congress_filter(maricopa_2016_results)
View(maricopa_2018_results)
View(maricopa_2012_congress)
congress_filter <- function(df){
congress_races <- df %>%
filter(str_detect(CONTEST_FULL_NAME, "US Rep Dst")) %>%
select(PRECINCT_NAME, CANDIDATE_FULL_NAME, candidate_party_id, CONTEST_FULL_NAME, TOTAL, PRECINCT_ID, CONTEST_TOTAL)
congress_races
}
maricopa_2018_congress <- congress_filter(maricopa_2018_results)
congress_filter <- function(df){
congress_races <- df %>%
filter(str_detect(CONTEST_FULL_NAME, "US Rep ")) %>%
select(PRECINCT_NAME, CANDIDATE_FULL_NAME, candidate_party_id, CONTEST_FULL_NAME, TOTAL, PRECINCT_ID, CONTEST_TOTAL)
congress_races
}
maricopa_2018_congress <- congress_filter(maricopa_2018_results)
maricopa_2012_congress <- congress_filter(maricopa_2012_results)
maricopa_2014_congress <- congress_filter(maricopa_2014_results)
maricopa_2016_congress <- congress_filter(maricopa_2016_results)
maricopa_2018_congress <- congress_filter(maricopa_2018_results)
View(maricopa_2018_congress)
?first
congress_races
congress_filter <- function(df){
congress_races <- df %>%
filter(str_detect(CONTEST_FULL_NAME, "US Rep ")) %>%
select(PRECINCT_NAME, CANDIDATE_FULL_NAME, candidate_party_id, CONTEST_FULL_NAME, TOTAL, PRECINCT_ID, CONTEST_TOTAL) %>%
mutate(TOTAL_PCT = TOTAL/CONTEST_TOTAL) %>%
group_by(PRECINCT_ID) %>%
arrange(desc(TOTAL_PCT)) %>%
mutate(WINNER = first(CANDIDATE_FULL_NAME))
congress_races
}
maricopa_2012_congress <- congress_filter(maricopa_2012_results)
View(maricopa_2012_congress)
congress_filter <- function(df){
congress_races <- df %>%
filter(str_detect(CONTEST_FULL_NAME, "US Rep ")) %>%
select(PRECINCT_NAME, CANDIDATE_FULL_NAME, candidate_party_id, CONTEST_FULL_NAME, TOTAL, PRECINCT_ID, CONTEST_TOTAL) %>%
mutate(TOTAL_PCT = TOTAL/CONTEST_TOTAL) %>%
group_by(PRECINCT_ID) %>%
arrange(desc(TOTAL_PCT)) %>%
mutate(WINNER = first(CANDIDATE_FULL_NAME)) %>%
ungroup()
congress_races
}
congress_filter <- function(df){
congress_races <- df %>%
filter(str_detect(CONTEST_FULL_NAME, "US Rep ")) %>%
select(PRECINCT_NAME, CANDIDATE_FULL_NAME, candidate_party_id, CONTEST_FULL_NAME, TOTAL, PRECINCT_ID, CONTEST_TOTAL) %>%
mutate(TOTAL_PCT = TOTAL/CONTEST_TOTAL) %>%
group_by(PRECINCT_ID) %>%
arrange(desc(TOTAL_PCT)) %>%
mutate(WINNER = first(CANDIDATE_FULL_NAME)) %>%
ungroup() %>%
arrange(PRECINCT_ID)
congress_races
}
maricopa_2012_congress <- congress_filter(maricopa_2012_results)
maricopa_2014_congress <- congress_filter(maricopa_2014_results)
maricopa_2016_congress <- congress_filter(maricopa_2016_results)
maricopa_2018_congress <- congress_filter(maricopa_2018_results)
