by = c("PRECINCT_NAME" = "PrecinctName"))
colnames(voter_registration_comparison) <- c("PrecinctName", "PrecinctId", "RegVoters2018", "RegVoters2020", "PctDem2020")
voter_registration_comparison <- voter_registration_comparison %>%
mutate(gains = RegVoters2020 - RegVoters2018)
maricopa_2018_governor_dem <- maricopa_2018_governor[,c("PRECINCT_NAME", "TOTAL_PCT_DEM")]
colnames(maricopa_2018_governor_dem) <- c("PrecinctName", "PctDem2018")
voter_registration_comparison_2018 <- inner_join(voter_registration_comparison, maricopa_2018_governor_dem)
voter_registration_comparison_2018_cut <- voter_registration_comparison_2018 %>%
group_by(PrecinctName) %>%
mutate(category = if_else(PctDem2020 > 0.5 & PctDem2018 > 0.5, "D-D",
if_else(PctDem2020 > 0.5 & PctDem2018 < 0.5, "R-D",
if_else(PctDem2020 < 0.5 & PctDem2018 > 0.5, "R-R", "R-D")))) %>%
na.omit()
# tabling changes in voter registration by electoral drift
voter_reg_changes <- voter_registration_comparison_2018_cut %>%
group_by(category) %>%
summarise(gains = sum(gains))
voter_reg_changes %>%
kbl() %>%
kable_styling()
voter_registration_comparison_2018_cut <- voter_registration_comparison_2018 %>%
group_by(PrecinctName) %>%
mutate(category = if_else(PctDem2020 > 0.5 & PctDem2018 > 0.5, "D-D",
if_else(PctDem2020 > 0.5 & PctDem2018 < 0.5, "R-D",
if_else(PctDem2020 < 0.5 & PctDem2018 > 0.5, "D-R", "R-R")))) %>%
na.omit()
# tabling changes in voter registration by electoral drift
voter_reg_changes <- voter_registration_comparison_2018_cut %>%
group_by(category) %>%
summarise(gains = sum(gains))
voter_reg_changes %>%
kbl() %>%
kable_styling()
voter_reg_changes %>%
kbl() %>%
kable_paper("hover", full_width = F)
voter_reg_changes %>%
kbl() %>%
kable_minimal()
voter_reg_changes %>%
kbl() %>%
kable_minimal() %>%
as_image()
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(leaflet)
library(sf)
library(RColorBrewer)
library(ggplot2)
library(kableExtra)
# reading in data
## Maricopa Co. data dump
maricopa_2020_11052020 <- read_tsv("Maricopa_2020_Provisional_110520.txt")
maricopa_2020_11062020 <- read_tsv("Maricopa_2020_Provisional_110620.txt")
maricopa_2020_11132020 <- read_tsv("Maricopa_2020_Provisional_111320.txt")
## Shapefiles
maricopa_precincts_2018 <- read_sf("./Shapefiles/VotingPrecincts/VotingPrecincts.shp")
maricopa_precincts_2018 <- st_transform(maricopa_precincts_2018, 4326)
## Historical Results
maricopa_2018_congress <- read_csv("./CongressRaceResults/maricopa_2018_corrected.csv")
maricopa_2018_governor <- read_csv("./CongressRaceResults/maricopa_2018_governor.csv")
maricopa_2018_voter_registration <- read_csv("./CongressRaceResults/maricopa_2018_voter_registration.csv")
presidential <- function(results){
voteshare_df <- results %>%
filter(ContestName == "Presidential Electors",
CandidateId %in% c(1, 2)) %>%
select(PrecinctId, PrecinctName, CandidateName, Votes, `Votes_EARLY VOTE`, `Votes_ELECTION DAY`, Votes_PROVISIONAL, `Turnout_EARLY VOTE`, `Turnout_ELECTION DAY`, Registered, Turnout, TurnoutPerc) %>%
na.omit()
voteshare_df
}
candidate_voteshare <- function(results, candidate){
voteshare_df <- results %>%
filter(CandidateName == candidate) %>%
mutate(PctVotes = round(Votes/Turnout, 2),
PrecinctId = substr(PrecinctName, 1, 4))
voteshare_df
}
View(maricopa_2020_11132020)
# extracting congressional candidate per precinct
congress <- function(results){
voteshare_df <- results %>%
filter(str_detect(ContestName, "^US Rep Dist"),
CandidateAffiliation %in% c("REP", "DEM")) %>%
select(PrecinctId, PrecinctName, CandidateName, Votes, `Votes_EARLY VOTE`, `Votes_ELECTION DAY`, Votes_PROVISIONAL, `Turnout_EARLY VOTE`, `Turnout_ELECTION DAY`, Registered, Turnout, TurnoutPerc) %>%
na.omit()
}
# latest data dump
maricopa_2020_11132020_congress <- maricopa_2020_11132020 %>%
congress()
View(maricopa_2020_11132020_congress)
voteshare_df <- results %>%
filter(ContestName == "Presidential Electors",
CandidateId %in% c(1, 2)) %>%
select(PrecinctId, PrecinctName, ContestName, CandidateName, Votes, `Votes_EARLY VOTE`, `Votes_ELECTION DAY`, Votes_PROVISIONAL, `Turnout_EARLY VOTE`, `Turnout_ELECTION DAY`, Registered, Turnout, TurnoutPerc) %>%
na.omit()
# extracting presidential candidate and calculating pct votes
presidential <- function(results){
voteshare_df <- results %>%
filter(ContestName == "Presidential Electors",
CandidateId %in% c(1, 2)) %>%
select(PrecinctId, PrecinctName, ContestName, CandidateName, Votes, `Votes_EARLY VOTE`, `Votes_ELECTION DAY`, Votes_PROVISIONAL, `Turnout_EARLY VOTE`, `Turnout_ELECTION DAY`, Registered, Turnout, TurnoutPerc) %>%
na.omit()
voteshare_df
}
# extracting congressional candidate per precinct
congress <- function(results){
voteshare_df <- results %>%
filter(str_detect(ContestName, "^US Rep Dist"),
CandidateAffiliation %in% c("REP", "DEM")) %>%
select(PrecinctId, PrecinctName, ContestName, CandidateName, Votes, `Votes_EARLY VOTE`, `Votes_ELECTION DAY`, Votes_PROVISIONAL, `Turnout_EARLY VOTE`, `Turnout_ELECTION DAY`, Registered, Turnout, TurnoutPerc) %>%
na.omit()
}
# latest data dump
maricopa_2020_11132020_congress <- maricopa_2020_11132020 %>%
congress()
# extracting congressional race per precinct
cd_per_precinct <- function(cd_results){
cd_per_precinct <- cd_results %>%
select(PrecinctId, PrecinctName, ContestName) %>%
unique()
cd_per_precinct
}
cd_per_precinct <- maricopa_2020_11132020_congress %>%
cd_per_precinct()
View(cd_per_precinct)
cd_per_precinct_2020 <- maricopa_2020_11132020_congress %>%
cd_per_precinct()
cd_per_precinct_2020 <- maricopa_2020_11132020_congress %>%
cd_per_precinct()
# extracting congressional race per precinct
cd_per_precinct <- function(cd_results){
cd_per_precinct <- cd_results %>%
select(PrecinctId, PrecinctName, ContestName) %>%
unique()
cd_per_precinct
}
cd_per_precinct_2020 <- maricopa_2020_11132020_congress %>%
cd_per_precinct()
View(maricopa_precincts_2018)
View(maricopa_precincts_2018)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(leaflet)
library(sf)
library(RColorBrewer)
library(ggplot2)
library(kableExtra)
# reading in data
## Maricopa Co. data dump
maricopa_2020_11132020 <- read_tsv("Maricopa_2020_Provisional_111320.txt")
maricopa_2016 <- read_tsv("Maricopa_2016.txt")
## Shapefiles
maricopa_precincts_2018 <- read_sf("./Shapefiles/VotingPrecincts/VotingPrecincts.shp")
maricopa_precincts_2018 <- st_transform(maricopa_precincts_2018, 4326)
maricopa_precincts_2016 <- read_sf("./Shapefiles/VotingPrecincts/HistoricalVotingPrecincts_12thru16.shp")
maricopa_precincts_2016 <- st_transform(maricopa_precincts_2016, 4326)
# extracting congressional candidate per precinct
congress <- function(results){
voteshare_df <- results %>%
filter(str_detect(ContestName, "^US Rep Dist"),
CandidateAffiliation %in% c("REP", "DEM")) %>%
select(PrecinctId, PrecinctName, ContestName, CandidateName, Votes, `Votes_EARLY VOTE`, `Votes_ELECTION DAY`, Votes_PROVISIONAL, `Turnout_EARLY VOTE`, `Turnout_ELECTION DAY`, Registered, Turnout, TurnoutPerc) %>%
na.omit()
}
# extracting congressional race per precinct
cd_per_precinct <- function(cd_results){
cd_per_precinct <- cd_results %>%
select(PrecinctId, PrecinctName, ContestName) %>%
unique()
cd_per_precinct
}
# extracting presidential candidate and calculating pct votes
presidential <- function(results){
voteshare_df <- results %>%
filter(ContestName == "Presidential Electors",
CandidateId %in% c(1, 2)) %>%
select(PrecinctId, PrecinctName, CandidateName, Votes, `Votes_EARLY VOTE`, `Votes_ELECTION DAY`, Votes_PROVISIONAL, `Turnout_EARLY VOTE`, `Turnout_ELECTION DAY`, Registered, Turnout, TurnoutPerc) %>%
na.omit()
voteshare_df
}
candidate_voteshare <- function(results, candidate){
voteshare_df <- results %>%
filter(CandidateName == candidate) %>%
mutate(PctVotes = round(Votes/Turnout, 2),
PrecinctId = substr(PrecinctName, 1, 4))
voteshare_df
}
# latest data dump
maricopa_2020_11132020_congress <- maricopa_2020_11132020 %>%
congress()
maricopa_2016_congress <- maricopa_2016 %>%
congress()
View(maricopa_2016)
# extracting congressional candidate per precinct
congress <- function(results, contest_name = "ContestName"){
voteshare_df <- results %>%
filter(str_detect(contest_name, "^US Rep"),
CandidateAffiliation %in% c("REP", "DEM")) %>%
select(PrecinctId, PrecinctName, contest_name, CandidateName, Votes, `Votes_EARLY VOTE`, `Votes_ELECTION DAY`, Votes_PROVISIONAL, `Turnout_EARLY VOTE`, `Turnout_ELECTION DAY`, Registered, Turnout, TurnoutPerc) %>%
na.omit()
}
# extracting congressional race per precinct
cd_per_precinct <- function(cd_results){
cd_per_precinct <- cd_results %>%
select(PrecinctId, PrecinctName, ContestName) %>%
unique()
cd_per_precinct
}
# extracting presidential candidate and calculating pct votes
presidential <- function(results){
voteshare_df <- results %>%
filter(ContestName == "Presidential Electors",
CandidateId %in% c(1, 2)) %>%
select(PrecinctId, PrecinctName, CandidateName, Votes, `Votes_EARLY VOTE`, `Votes_ELECTION DAY`, Votes_PROVISIONAL, `Turnout_EARLY VOTE`, `Turnout_ELECTION DAY`, Registered, Turnout, TurnoutPerc) %>%
na.omit()
voteshare_df
}
candidate_voteshare <- function(results, candidate){
voteshare_df <- results %>%
filter(CandidateName == candidate) %>%
mutate(PctVotes = round(Votes/Turnout, 2),
PrecinctId = substr(PrecinctName, 1, 4))
voteshare_df
}
# latest data dump
maricopa_2020_11132020_congress <- maricopa_2020_11132020 %>%
congress()
maricopa_2016_congress <- maricopa_2016 %>%
congress(contest_name = "CONTEST_FULL_NAME")
colnames(maricopa_2016)
congress_2016 <- function(results, contest_name = "CONTEST_TYPE"){
voteshare_df <- results %>%
filter(str_detect(contest_name, "^US Rep"),
candidate_party_id %in% c(1, 2)) %>%
select(PRECINCT_NAME, contest_name, CANDIDATE_FULL_NAME, TOTAL, CONTEST_TOTAL) %>%
na.omit()
}
# extracting congressional candidate per precinct
congress_2020 <- function(results, contest_name = "ContestName"){
voteshare_df <- results %>%
filter(str_detect(contest_name, "^US Rep"),
CandidateAffiliation %in% c("REP", "DEM")) %>%
select(PrecinctId, PrecinctName, contest_name, CandidateName, Votes, `Votes_EARLY VOTE`, `Votes_ELECTION DAY`, Votes_PROVISIONAL, `Turnout_EARLY VOTE`, `Turnout_ELECTION DAY`, Registered, Turnout, TurnoutPerc) %>%
na.omit()
}
congress_2016 <- function(results, contest_name = "CONTEST_TYPE"){
voteshare_df <- results %>%
filter(str_detect(contest_name, "^US Rep"),
candidate_party_id %in% c(1, 2)) %>%
select(PRECINCT_NAME, contest_name, CANDIDATE_FULL_NAME, TOTAL, CONTEST_TOTAL) %>%
na.omit()
}
# extracting congressional race per precinct
cd_per_precinct <- function(cd_results){
cd_per_precinct <- cd_results %>%
select(PrecinctId, PrecinctName, ContestName) %>%
unique()
cd_per_precinct
}
# extracting presidential candidate and calculating pct votes
presidential <- function(results){
voteshare_df <- results %>%
filter(ContestName == "Presidential Electors",
CandidateId %in% c(1, 2)) %>%
select(PrecinctId, PrecinctName, CandidateName, Votes, `Votes_EARLY VOTE`, `Votes_ELECTION DAY`, Votes_PROVISIONAL, `Turnout_EARLY VOTE`, `Turnout_ELECTION DAY`, Registered, Turnout, TurnoutPerc) %>%
na.omit()
voteshare_df
}
candidate_voteshare <- function(results, candidate){
voteshare_df <- results %>%
filter(CandidateName == candidate) %>%
mutate(PctVotes = round(Votes/Turnout, 2),
PrecinctId = substr(PrecinctName, 1, 4))
voteshare_df
}
# latest data dump
maricopa_2020_11132020_congress <- maricopa_2020_11132020 %>%
congress()
maricopa_2016_congress <- maricopa_2016 %>%
congress(contest_name = "CONTEST_FULL_NAME")
# extracting congressional candidate per precinct
congress_2020 <- function(results, contest_name = "ContestName"){
voteshare_df <- results %>%
filter(str_detect(contest_name, "^US Rep"),
CandidateAffiliation %in% c("REP", "DEM")) %>%
select(PrecinctId, PrecinctName, contest_name, CandidateName, Votes, `Votes_EARLY VOTE`, `Votes_ELECTION DAY`, Votes_PROVISIONAL, `Turnout_EARLY VOTE`, `Turnout_ELECTION DAY`, Registered, Turnout, TurnoutPerc) %>%
na.omit()
}
congress_2016 <- function(results, contest_name = "CONTEST_TYPE"){
voteshare_df <- results %>%
filter(str_detect(contest_name, "^US Rep"),
candidate_party_id %in% c(1, 2)) %>%
select(PRECINCT_NAME, contest_name, CANDIDATE_FULL_NAME, TOTAL, CONTEST_TOTAL) %>%
na.omit()
}
# extracting congressional race per precinct
cd_per_precinct <- function(cd_results){
cd_per_precinct <- cd_results %>%
select(PrecinctId, PrecinctName, ContestName) %>%
unique()
cd_per_precinct
}
# extracting presidential candidate and calculating pct votes
presidential <- function(results){
voteshare_df <- results %>%
filter(ContestName == "Presidential Electors",
CandidateId %in% c(1, 2)) %>%
select(PrecinctId, PrecinctName, CandidateName, Votes, `Votes_EARLY VOTE`, `Votes_ELECTION DAY`, Votes_PROVISIONAL, `Turnout_EARLY VOTE`, `Turnout_ELECTION DAY`, Registered, Turnout, TurnoutPerc) %>%
na.omit()
voteshare_df
}
candidate_voteshare <- function(results, candidate){
voteshare_df <- results %>%
filter(CandidateName == candidate) %>%
mutate(PctVotes = round(Votes/Turnout, 2),
PrecinctId = substr(PrecinctName, 1, 4))
voteshare_df
}
# latest data dump
maricopa_2020_11132020_congress <- maricopa_2020_11132020 %>%
congress_2020()
maricopa_2016_congress <- maricopa_2016 %>%
congress_2016(contest_name = "CONTEST_FULL_NAME")
cd_per_precinct_2020 <- maricopa_2020_11132020_congress %>%
cd_per_precinct()
cd_per_precinct_2016 <- maricopa_2016_congress %>%
cd_per_precinct()
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
#library(leaflet)
library(sf)
#library(RColorBrewer)
library(ggplot2)
library(kableExtra)
# reading in data
## Maricopa Co. data dump
maricopa_2020_11132020 <- read_tsv("Maricopa_2020_Provisional_111320.txt")
maricopa_2016 <- read_tsv("Maricopa_2016.txt")
## Shapefiles
maricopa_precincts_2018 <- read_sf("./Shapefiles/VotingPrecincts/VotingPrecincts.shp")
maricopa_precincts_2018 <- st_transform(maricopa_precincts_2018, 4326)
maricopa_precincts_2016 <- read_sf("./Shapefiles/VotingPrecincts/HistoricalVotingPrecincts_12thru16.shp")
maricopa_precincts_2016 <- st_transform(maricopa_precincts_2016, 4326)
# extracting congressional candidate per precinct
congress_2020 <- function(results){
voteshare_df <- results %>%
filter(str_detect(ContestName, "^US Rep"),
CandidateAffiliation %in% c("REP", "DEM")) %>%
select(PrecinctId, PrecinctName, ContestName, CandidateName, Votes, `Votes_EARLY VOTE`, `Votes_ELECTION DAY`, Votes_PROVISIONAL, `Turnout_EARLY VOTE`, `Turnout_ELECTION DAY`, Registered, Turnout, TurnoutPerc) %>%
na.omit()
}
congress_2016 <- function(results, CONTEST_FULL_NAME){
voteshare_df <- results %>%
filter(str_detect(CONTEST_FULL_NAME, "^US Rep"),
candidate_party_id %in% c(1, 2)) %>%
select(PRECINCT_NAME, CONTEST_FULL_NAME, CANDIDATE_FULL_NAME, TOTAL, CONTEST_TOTAL) %>%
na.omit()
}
# extracting congressional race per precinct
## separate functions have to be written for 2016 and 2020 because the reporting format was different
cd_per_precinct <- function(cd_results){
cd_per_precinct <- cd_results %>%
select(PrecinctId, PrecinctName, ContestName) %>%
unique()
cd_per_precinct <- cd_per_precinct %>%
group_by(PrecinctName) %>%
mutate(PrecinctId = str_pad(PrecinctId, width = 4, side = "left", pad = 0),
PrecinctName = substr(PrecinctName, 6, nchar(PrecinctName)),
ContestName = substr(ContestName, 16, 16))
colnames(cd_per_precinct) <- c("PrecinctId", "PrecinctName", "CD")
cd_per_precinct
}
cd_per_precinct_2016 <- function(cd_results){
cd_per_precinct <- cd_results %>%
select(PRECINCT_NAME, CONTEST_FULL_NAME) %>%
unique()
cd_per_precinct <- cd_per_precinct %>%
group_by(PRECINCT_NAME) %>%
mutate(PRECINCT_ID = substr(PRECINCT_NAME, 1,4),
PRECINCT_NAME = substr(PRECINCT_NAME, 6, nchar(PRECINCT_NAME)),
CONTEST_FULL_NAME = substr(CONTEST_FULL_NAME, 15, 15)) %>%
ungroup()
colnames(cd_per_precinct) <- c("PrecinctName", "CD", "PrecinctId")
cd_per_precinct <- cd_per_precinct[,c(3,1,2)]
cd_per_precinct
}
# extracting presidential candidate and calculating pct votes
presidential <- function(results){
voteshare_df <- results %>%
filter(ContestName == "Presidential Electors",
CandidateId %in% c(1, 2)) %>%
select(PrecinctId, PrecinctName, CandidateName, Votes, `Votes_EARLY VOTE`, `Votes_ELECTION DAY`, Votes_PROVISIONAL, `Turnout_EARLY VOTE`, `Turnout_ELECTION DAY`, Registered, Turnout, TurnoutPerc) %>%
na.omit()
voteshare_df
}
candidate_voteshare <- function(results, candidate){
voteshare_df <- results %>%
filter(CandidateName == candidate) %>%
mutate(PctVotes = round(Votes/Turnout, 2),
PrecinctId = substr(PrecinctName, 1, 4))
voteshare_df
}
# latest data dump
maricopa_2020_11132020_congress <- maricopa_2020_11132020 %>%
congress_2020()
maricopa_2016_congress <- maricopa_2016 %>%
congress_2016()
cd_per_precinct_2020 <- maricopa_2020_11132020_congress %>%
cd_per_precinct()
cd_per_precinct_2016 <- maricopa_2016_congress %>%
cd_per_precinct_2016()
maricopa_2020_11132020_narrow <- maricopa_2020_11132020 %>%
presidential()
maricopa_2020_dems_111320 <- maricopa_2020_11132020_narrow %>%
candidate_voteshare(., "BIDEN / HARRIS")
maricopa_2020_reps_111320 <- maricopa_2020_11132020_narrow %>%
candidate_voteshare(., "TRUMP / PENCE")
View(maricopa_2020_11132020_narrow)
View(cd_per_precinct_2020)
# attaching congressional district to each precinct
maricopa_2020_11132020_narrow <- maricopa_2020_11132020_narrow %>%
group_by(PrecinctId) %>%
mutate(PrecinctId = substr(PrecinctName, 1, 4),
PrecinctName = substr(PrecinctName, 6, nchar(PrecinctName)))
maricopa_2020_11132020_narrow <- inner_join(maricopa_2020_11132020_narrow, cd_per_precinct_2020)
View(maricopa_2016)
presidential_2016 <- function(results){
voteshare_df <- results %>%
filter(CONTEST_FULL_NAME == "Presidential Electors",
candidate_party_id %in% c(1, 2)) %>%
select(PRECINCT_NAME, CANDIDATE_FULL_NAME, TOTAL, CONTEST_TOTAL)
voteshare_df <- voteshare_df %>%
mutate(PrecinctId = substr(PRECINCT_NAME, 1,4),
PrecinctName = substr(PRECINCT_NAME, 6, nchar(PRECINCT_NAME))) %>%
select(PrecinctId, PrecinctName, CANDIDATE_FULL_NAME, TOTAL, CONTEST_TOTAL)
voteshare_df
}
maricopa_2016_presidential <- maricopa_2016 %>%
presidential_2016()
View(maricopa_2016_presidential)
maricopa_2016_presidential <- inner_join(maricopa_2016_presidential, cd_per_precinct_2016)
## Maricopa 2016
maricopa_2016_presidential_congress <- maricopa_2016_presidential %>%
group_by(CD, CANDIDATE_FULL_NAME) %>%
summarise(total_votes = sum(CONTEST_TOTAL),
votes_candidate = sum(TOTAL))
View(maricopa_2016_presidential)
View(maricopa_2016_presidential_congress)
## Maricopa 2016
maricopa_2016_presidential_congress <- maricopa_2016_presidential %>%
group_by(CD, CANDIDATE_FULL_NAME) %>%
summarise(total_votes = sum(CONTEST_TOTAL),
votes_candidate = sum(TOTAL)) %>%
mutate(votes_pct = round(100*votes_candidate/total_votes)))
## Maricopa 2016
maricopa_2016_presidential_congress <- maricopa_2016_presidential %>%
group_by(CD, CANDIDATE_FULL_NAME) %>%
summarise(total_votes = sum(CONTEST_TOTAL),
votes_candidate = sum(TOTAL)) %>%
mutate(votes_pct = round(100*votes_candidate/total_votes))
## Maricopa 2020
maricopa_2020_11132020_presidential_congress <- maricopa_2020_11132020_narrow %>%
group_by(CD, CandidateName) %>%
summarise(total_votes = sum(Turnout),
votes_candidate = sum(Votes)) %>%
mutate(votes_pct = round(100*votes_candidate/total_votes))
View(maricopa_2020_11132020_presidential_congress)
## Maricopa 2016
maricopa_2016_presidential_congress <- maricopa_2016_presidential %>%
group_by(CD, CANDIDATE_FULL_NAME) %>%
summarise(total_votes = sum(CONTEST_TOTAL),
votes_candidate = sum(TOTAL)) %>%
mutate(votes_pct = round(100*votes_candidate/total_votes),
party = substr(CANDIDATE_FULL_NAME, 1, 3))
## Maricopa 2020
maricopa_2020_11132020_presidential_congress <- maricopa_2020_11132020_narrow %>%
group_by(CD, CandidateName) %>%
summarise(total_votes = sum(Turnout),
votes_candidate = sum(Votes)) %>%
mutate(votes_pct = round(100*votes_candidate/total_votes),
party = ifelse(CandidateName == "BIDEN / HARRIS", "DEM", "REP"))
## Maricopa 2016
maricopa_2016_presidential_congress <- maricopa_2016_presidential %>%
group_by(CD, CANDIDATE_FULL_NAME) %>%
summarise(total_votes = sum(CONTEST_TOTAL),
votes_candidate = sum(TOTAL)) %>%
mutate(votes_pct = round(100*votes_candidate/total_votes),
party = substr(CANDIDATE_FULL_NAME, 1, 3))
colnames(maricopa_2016_presidential_congress) <- c("CD", "Candidate_2016", "total_votes_2016", "votes_candidate_2016", "votes_pct_2016", "party")
## Maricopa 2020
maricopa_2020_11132020_presidential_congress <- maricopa_2020_11132020_narrow %>%
group_by(CD, CandidateName) %>%
summarise(total_votes = sum(Turnout),
votes_candidate = sum(Votes)) %>%
mutate(votes_pct = round(100*votes_candidate/total_votes),
party = ifelse(CandidateName == "BIDEN / HARRIS", "DEM", "REP"))
colnames(maricopa_2020_presidential_congress) <- c("CD", "Candidate_2020", "total_votes_2020", "votes_candidate_2020", "votes_pct_2016", "party")
colnames(maricopa_2020_11132020_presidential_congress) <- c("CD", "Candidate_2020", "total_votes_2020", "votes_candidate_2020", "votes_pct_2016", "party")
## comparing
maricopa_comparison <- inner_join(maricopa_2020_11132020_presidential_congress, maricopa_2016_presidential_congress)
colnames(maricopa_2020_11132020_presidential_congress) <- c("CD", "Candidate_2020", "total_votes_2020", "votes_candidate_2020", "votes_pct_2020", "party")
## Maricopa 2020
maricopa_2020_11132020_presidential_congress <- maricopa_2020_11132020_narrow %>%
group_by(CD, CandidateName) %>%
summarise(total_votes = sum(Turnout),
votes_candidate = sum(Votes)) %>%
mutate(votes_pct = round(100*votes_candidate/total_votes),
party = ifelse(CandidateName == "BIDEN / HARRIS", "DEM", "REP"))
colnames(maricopa_2020_11132020_presidential_congress) <- c("CD", "Candidate_2020", "total_votes_2020", "votes_candidate_2020", "votes_pct_2020", "party")
## comparing
maricopa_comparison <- inner_join(maricopa_2020_11132020_presidential_congress, maricopa_2016_presidential_congress)
View(maricopa_comparison)
