addLegend("bottomright", pal = dem20_pal, values = maricopa_2020_dem$votes_pct_2020, title = "Democrats", opacity = 0.7) %>%
setView(lng = phoenix[1], lat = phoenix[2], zoom = 8.5)
maricopa_map
?addpolygons
?addPolygons
## setting up map
maricopa_map <- leaflet() %>%
addMapboxTiles(style_id = "streets-v11",
username = "mapbox") %>%
addPolygons(data = maricopa_cd, label = ~CD, group = "Congressional District", weight = 0.5, opacity = 0.75,
color = "white", fillColor = "grey") %>%
addPolygons(data = maricopa_cd_2016_rep, label = ~paste("CD ", CD, ": ", votes_pct_2016, "%", sep = ""),
group = "Republicans - 2016", fillColor = ~rep20_pal(votes_pct_2016), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addPolygons(data = maricopa_cd_2016_dem, label = ~paste("CD ", CD, ": ", votes_pct_2016, "%", sep = ""),
group = "Democrats - 2016", fillColor = ~dem20_pal(votes_pct_2016), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addPolygons(data = maricopa_cd_2020_rep, label = ~paste("CD ", CD, ": ", votes_pct_2020, "%", sep = ""),
group = "Republicans - 2020", fillColor = ~rep20_pal(votes_pct_2020), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addPolygons(data = maricopa_cd_2020_dem, label = ~paste("CD ", CD, ": ", votes_pct_2020, "%", sep = ""),
group = "Democrats - 2020", fillColor = ~dem20_pal(votes_pct_2020), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addLayersControl(overlayGroups = c("Congressional District", "Republicans - 2016", "Democrats - 2016",
"Republicans - 2020", "Democrats - 2020"),
options = layersControlOptions(collapsed = FALSE)) %>%
hideGroup(c("Republicans - 2016", "Democrats - 2016", "Republicans - 2020", "Democrats - 2020")) %>%
addLegend("bottomright", pal = dem20_pal, values = maricopa_2020_dem$votes_pct_2020, title = "Democrats", opacity = 0.7) %>%
setView(lng = phoenix[1], lat = phoenix[2], zoom = 8.5)
maricopa_map
## color bins
bins <- c(0, 20, 30, 40, 50, 60, 70, 80, 100)
bins <- c(0, 20, 30, 40, 50, 60, 70, 80, 100)
rep16_pal <- colorBin("Reds", domain = maricopa_2016_rep$votes_pct_2016, bins = bins)
rep20_pal <- colorBin("Reds", domain = maricopa_2020_rep$votes_pct_2020, bins = bins)
dem16_pal <- colorBin("Blues", domain = maricopa_2016_dem$votes_pct_2016, bins = bins)
dem20_pal <- colorBin("Blues", domain = maricopa_2020_dem$votes_pct_2020, bins = bins)
## setting up map
maricopa_map <- leaflet() %>%
addMapboxTiles(style_id = "streets-v11",
username = "mapbox") %>%
addPolygons(data = maricopa_cd, label = ~CD, group = "Congressional District") %>%
addPolygons(data = maricopa_cd_2016_rep, label = ~paste("CD ", CD, ": ", votes_pct_2016, "%", sep = ""),
group = "Republicans - 2016", fillColor = ~rep20_pal(votes_pct_2016), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addPolygons(data = maricopa_cd_2016_dem, label = ~paste("CD ", CD, ": ", votes_pct_2016, "%", sep = ""),
group = "Democrats - 2016", fillColor = ~dem20_pal(votes_pct_2016), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addPolygons(data = maricopa_cd_2020_rep, label = ~paste("CD ", CD, ": ", votes_pct_2020, "%", sep = ""),
group = "Republicans - 2020", fillColor = ~rep20_pal(votes_pct_2020), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addPolygons(data = maricopa_cd_2020_dem, label = ~paste("CD ", CD, ": ", votes_pct_2020, "%", sep = ""),
group = "Democrats - 2020", fillColor = ~dem20_pal(votes_pct_2020), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addLayersControl(overlayGroups = c("Congressional District", "Republicans - 2016", "Democrats - 2016",
"Republicans - 2020", "Democrats - 2020"),
options = layersControlOptions(collapsed = FALSE)) %>%
hideGroup(c("Republicans - 2016", "Democrats - 2016", "Republicans - 2020", "Democrats - 2020")) %>%
addLegend("bottomright", pal = dem20_pal, values = maricopa_2020_dem$votes_pct_2020, title = "Vote Share (%)", opacity = 0.7) %>%
addLegend("bottomright", pal = rep20_pal, values = maricopa_2020_rep$votes_pct_2020, title = "Vote Share (%)", opacity = 0.7) %>%
setView(lng = phoenix[1], lat = phoenix[2], zoom = 8.5)
maricopa_map
## setting up map
maricopa_map <- leaflet() %>%
addMapboxTiles(style_id = "streets-v11",
username = "mapbox") %>%
addPolygons(data = maricopa_cd, label = ~CD, group = "Congressional District") %>%
addPolygons(data = maricopa_cd_2016_rep, label = ~paste("CD ", CD, ": ", votes_pct_2016, "%", sep = ""),
group = "Republicans - 2016", fillColor = ~rep20_pal(votes_pct_2016), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addPolygons(data = maricopa_cd_2016_dem, label = ~paste("CD ", CD, ": ", votes_pct_2016, "%", sep = ""),
group = "Democrats - 2016", fillColor = ~dem20_pal(votes_pct_2016), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addPolygons(data = maricopa_cd_2020_rep, label = ~paste("CD ", CD, ": ", votes_pct_2020, "%", sep = ""),
group = "Republicans - 2020", fillColor = ~rep20_pal(votes_pct_2020), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addPolygons(data = maricopa_cd_2020_dem, label = ~paste("CD ", CD, ": ", votes_pct_2020, "%", sep = ""),
group = "Democrats - 2020", fillColor = ~dem20_pal(votes_pct_2020), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addLayersControl(overlayGroups = c("Congressional District", "Republicans - 2016", "Democrats - 2016",
"Republicans - 2020", "Democrats - 2020"),
options = layersControlOptions(collapsed = FALSE)) %>%
hideGroup(c("Republicans - 2016", "Democrats - 2016", "Republicans - 2020", "Democrats - 2020")) %>%
addLegend("bottomright", pal = dem20_pal, values = maricopa_2020_dem$votes_pct_2020, title = "Dem Vote Share (%)",
opacity = 0.7, group = c("Democrats - 2016", "Democrats - 2020")) %>%
addLegend("bottomright", pal = rep20_pal, values = maricopa_2020_rep$votes_pct_2020, title = "Rep Vote Share (%)",
opacity = 0.7, group = c("Republicans - 2016", "Republicans - 2020")) %>%
setView(lng = phoenix[1], lat = phoenix[2], zoom = 8.5)
maricopa_map
## setting up map
maricopa_map <- leaflet() %>%
addMapboxTiles(style_id = "streets-v11",
username = "mapbox") %>%
addPolygons(data = maricopa_cd, label = ~CD, group = "Congressional District") %>%
addPolygons(data = maricopa_cd_2016_rep, label = ~paste("CD ", CD, ": ", votes_pct_2016, "%", sep = ""),
group = "Republicans - 2016", fillColor = ~rep20_pal(votes_pct_2016), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addPolygons(data = maricopa_cd_2016_dem, label = ~paste("CD ", CD, ": ", votes_pct_2016, "%", sep = ""),
group = "Democrats - 2016", fillColor = ~dem20_pal(votes_pct_2016), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addPolygons(data = maricopa_cd_2020_rep, label = ~paste("CD ", CD, ": ", votes_pct_2020, "%", sep = ""),
group = "Republicans - 2020", fillColor = ~rep20_pal(votes_pct_2020), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addPolygons(data = maricopa_cd_2020_dem, label = ~paste("CD ", CD, ": ", votes_pct_2020, "%", sep = ""),
group = "Democrats - 2020", fillColor = ~dem20_pal(votes_pct_2020), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addLegend("bottomright", pal = dem20_pal, values = maricopa_2020_dem$votes_pct_2020, title = "Dem Vote Share (%)",
opacity = 0.7, group = c("Democrats - 2016", "Democrats - 2020")) %>%
addLegend("bottomright", pal = rep20_pal, values = maricopa_2020_rep$votes_pct_2020, title = "Rep Vote Share (%)",
opacity = 0.7, group = c("Republicans - 2016", "Republicans - 2020")) %>%
addLayersControl(overlayGroups = c("Congressional District", "Republicans - 2016", "Democrats - 2016",
"Republicans - 2020", "Democrats - 2020"),
options = layersControlOptions(collapsed = FALSE)) %>%
hideGroup(c("Republicans - 2016", "Democrats - 2016", "Republicans - 2020", "Democrats - 2020")) %>%
setView(lng = phoenix[1], lat = phoenix[2], zoom = 8.5)
maricopa_map
?addLegend
## setting up map
maricopa_map <- leaflet() %>%
addMapboxTiles(style_id = "streets-v11",
username = "mapbox") %>%
addPolygons(data = maricopa_cd, label = ~CD, group = "Congressional District") %>%
addPolygons(data = maricopa_cd_2016_rep, label = ~paste("CD ", CD, ": ", votes_pct_2016, "%", sep = ""),
group = "Republicans - 2016", fillColor = ~rep20_pal(votes_pct_2016), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addPolygons(data = maricopa_cd_2016_dem, label = ~paste("CD ", CD, ": ", votes_pct_2016, "%", sep = ""),
group = "Democrats - 2016", fillColor = ~dem20_pal(votes_pct_2016), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addPolygons(data = maricopa_cd_2020_rep, label = ~paste("CD ", CD, ": ", votes_pct_2020, "%", sep = ""),
group = "Republicans - 2020", fillColor = ~rep20_pal(votes_pct_2020), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addPolygons(data = maricopa_cd_2020_dem, label = ~paste("CD ", CD, ": ", votes_pct_2020, "%", sep = ""),
group = "Democrats - 2020", fillColor = ~dem20_pal(votes_pct_2020), fillOpacity = 0.75,
weight = 0, opacity = 0, color = "white") %>%
addLegend("bottomright", pal = dem20_pal, values = maricopa_2020_dem$votes_pct_2020, title = "Dem Vote Share (%)",
opacity = 0.7, group = c("Democrats - 2016", "Democrats - 2020")) %>%
addLegend("bottomleft", pal = rep20_pal, values = maricopa_2020_rep$votes_pct_2020, title = "Rep Vote Share (%)",
opacity = 0.7, group = "Republicans - 2016") %>%
addLayersControl(overlayGroups = c("Congressional District", "Republicans - 2016", "Democrats - 2016",
"Republicans - 2020", "Democrats - 2020"),
options = layersControlOptions(collapsed = FALSE)) %>%
hideGroup(c("Republicans - 2016", "Democrats - 2016", "Republicans - 2020", "Democrats - 2020")) %>%
setView(lng = phoenix[1], lat = phoenix[2], zoom = 8.5)
maricopa_map
library(plotly)
library(ggalt)
View(maricopa_comparison)
maricopa_comparison_dem <- maricopa_comparison %>%
filter(party == "DEM")
maricopa_comparison_rep <- maricopa_comparison %>%
filter(party == "REP")
## plot
ggplot() +
geom_dumbbell(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD),
color = "#a3c4dc", size = 0.75, point.color.l = "#0e668b") +
scale_x_continuous(label = percent) +
labs(x = "Vote Share", y = "Congressional District", title = "Vote Share by Congressional Districts")
## plot
ggplot(aes()) +
geom_dumbbell(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD),
color = "#a3c4dc", size = 0.75, point.color.l = "#0e668b") +
scale_x_continuous(label = percent) +
labs(x = "Vote Share", y = "Congressional District", title = "Vote Share by Congressional Districts")
## plot
ggplot(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD),) +
geom_dumbbell(
color = "#a3c4dc", size = 0.75, point.color.l = "#0e668b") +
scale_x_continuous(label = percent) +
labs(x = "Vote Share", y = "Congressional District", title = "Vote Share by Congressional Districts")
color = "#a3c4dc", size = 0.75, point.color.l = "#0e668b") +
## plot
ggplot(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD),) +
geom_dumbbell(
color = "#a3c4dc", size = 0.75, point.color.l = "#0e668b") +
scale_x_continuous(label = "percent") +
labs(x = "Vote Share", y = "Congressional District", title = "Vote Share by Congressional Districts")
## plot
ggplot(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD),) +
geom_dumbbell(color = "#a3c4dc", size = 0.75, point.color.l = "#0e668b") +
#scale_x_continuous(label = "percent") +
labs(x = "Vote Share", y = "Congressional District", title = "Vote Share by Congressional Districts")
## plot
ggplot(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD),) +
geom_dumbbell(colour_x = "#bdc9e1", size = 0.75, colour_xend = "#1c9099") +
#scale_x_continuous(label = "percent") +
labs(x = "Vote Share", y = "Congressional District", title = "Vote Share by Congressional Districts")
## plot
ggplot(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD),) +
geom_dumbbell(colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099") +
#scale_x_continuous(label = "percent") +
labs(x = "Vote Share", y = "Congressional District", title = "Vote Share by Congressional Districts")
## plot
ggplot(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD),) +
geom_dumbbell(colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1") +
#scale_x_continuous(label = "percent") +
labs(x = "Vote Share", y = "Congressional District", title = "Vote Share by Congressional Districts")
## plot
ggplot(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD),) +
geom_dumbbell(colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1") +
#scale_x_continuous(label = "percent") +
labs(x = "Vote Share", y = "Congressional District", title = "Vote Share by Congressional Districts") +
theme_minimal()
## plot
ggplot(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD)) +
geom_dumbbell(colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1") +
geom_dumbbell(maricopa_comparison_rep, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD),
colour_x = "#fdcc8a", size = 2, colour_xend = "#e34a33", colour = "#e3e3e1")
## plot
ggplot(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD)) +
geom_dumbbell(colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1") +
geom_dumbbell(maricopa_comparison_rep, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD),
colour_x = "#fdcc8a", size = 2, colour_xend = "#e34a33", colour = "#e3e3e1") +
#scale_x_continuous(label = "percent") +
labs(x = "Vote Share (%)", y = "Congressional District", title = "Vote Share by Congressional Districts") +
theme_minimal()
?geom_dumbbell
## plot
ggplot(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD)) +
geom_dumbbell(colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1") +
geom_dumbbell(inherit.aes = F, maricopa_comparison_rep, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD),
colour_x = "#fdcc8a", size = 2, colour_xend = "#e34a33", colour = "#e3e3e1") +
#scale_x_continuous(label = "percent") +
labs(x = "Vote Share (%)", y = "Congressional District", title = "Vote Share by Congressional Districts") +
theme_minimal()
## plot
ggplot(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD)) +
geom_dumbbell(colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1") +
geom_dumbbell(maricopa_comparison_rep,
colour_x = "#fdcc8a", size = 2, colour_xend = "#e34a33", colour = "#e3e3e1") +
#scale_x_continuous(label = "percent") +
labs(x = "Vote Share (%)", y = "Congressional District", title = "Vote Share by Congressional Districts") +
theme_minimal()
## plot
ggplot(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD)) +
geom_dumbbell(colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1") +
geom_dumbbell(data = maricopa_comparison_rep,
colour_x = "#fdcc8a", size = 2, colour_xend = "#e34a33", colour = "#e3e3e1") +
#scale_x_continuous(label = "percent") +
labs(x = "Vote Share (%)", y = "Congressional District", title = "Vote Share by Congressional Districts") +
theme_minimal()
## plot
ggplot(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD)) +
geom_dumbbell(colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1", show.legend = T) +
geom_dumbbell(data = maricopa_comparison_rep,
colour_x = "#fdcc8a", size = 2, colour_xend = "#e34a33", colour = "#e3e3e1") +
#scale_x_continuous(label = "percent") +
labs(x = "Vote Share (%)", y = "Congressional District", title = "Vote Share by Congressional Districts") +
theme_minimal()
## plot
ggplot(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD)) +
geom_dumbbell(colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1", show.legend = T) +
geom_dumbbell(data = maricopa_comparison_rep,
colour_x = "#fdcc8a", size = 2, colour_xend = "#e34a33", colour = "#e3e3e1") +
#scale_x_continuous(label = "percent") +
labs(x = "Vote Share (%)", y = "Congressional District", title = "Vote Share by Congressional Districts") +
scale_color_manual() +
theme_minimal()
## plot
ggplotly(ggplot(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD)) +
geom_dumbbell(colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1", show.legend = T) +
geom_dumbbell(data = maricopa_comparison_rep,
colour_x = "#fdcc8a", size = 2, colour_xend = "#e34a33", colour = "#e3e3e1") +
#scale_x_continuous(label = "percent") +
labs(x = "Vote Share (%)", y = "Congressional District", title = "Vote Share by Congressional Districts") +
theme_minimal())
## plot
ggplot(maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020, y = CD, group = CD)) +
geom_dumbbell(colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1", show.legend = T) +
geom_dumbbell(data = maricopa_comparison_rep,
colour_x = "#fdcc8a", size = 2, colour_xend = "#e34a33", colour = "#e3e3e1") +
#scale_x_continuous(label = "percent") +
labs(x = "Vote Share (%)", y = "Congressional District", title = "Vote Share by Congressional Districts") +
theme_minimal()
View(maricopa_comparison_dem)
?pivot_longer
maricopa_comparison_dem_long <- maricopa_comparison_dem %>%
select(CD, votes_pct_2016, votes_pct_2020) %>%
pivot_longer(cols = votes_pct_2016:votes_pct_2020)
library(tidyverse)
maricopa_comparison_dem_long <- maricopa_comparison_dem %>%
select(CD, votes_pct_2016, votes_pct_2020) %>%
pivot_longer(cols = votes_pct_2016:votes_pct_2020)
View(maricopa_comparison_dem_long)
maricopa_comparison_dem_long <- maricopa_comparison_dem %>%
select(CD, votes_pct_2016, votes_pct_2020)
colnames(maricopa_comparison_dem_long) <- c("CD", "Dem 2016", "Dem 2020")
pivot_longer(cols = c(`Dem 2016`, `Dem 2020`))
colnames(maricopa_comparison_dem_long) <- c("CD", "Dem 2016", "Dem 2020")
maricopa_comparison_dem_long <- pivot_longer(data = maricopa_comparison_dem_long, cols = c(`Dem 2016`, `Dem 2020`))
maricopa_comparison_rep_long <- maricopa_comparison_rep %>%
select(CD, votes_pct_2016, votes_pct_2020)
colnames(maricopa_comparison_rep_long) <- c("CD", "Rep 2016", "Rep 2020")
maricopa_comparison_rep_long <- pivot_longer(data = maricopa_comparison_rep_long, cols = c(`Rep 2016`, `Rep 2020`))
maricopa_comparison_long <- rbind(maricopa_comparison_dem_long, maricopa_comparison_rep_long)
View(maricopa_comparison_long)
## plot
ggplot(maricopa_comparison_dem, aes(y = CD)) +
geom_point(data = maricopa_comparison_long, aes(x = value, color = name), size = 2) +
geom_dumbbell(data = maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020),
colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1", show.legend = T) +
geom_dumbbell(data = maricopa_comparison_rep, aes(x = votes_pct_2016, xend = votes_pct_2020),
colour_x = "#fdcc8a", size = 2, colour_xend = "#e34a33", colour = "#e3e3e1") +
scale_color_manual(name = "Party: Year", values = c("#bdc9e1", "#1c9099", "#fdcc8a", "#e34a33")) +
labs(x = "Vote Share (%)", y = "Congressional District", title = "Vote Share by Congressional Districts") +
theme_minimal()
?scale_color_manual
## plot
ggplot(maricopa_comparison_dem, aes(y = CD)) +
geom_point(data = maricopa_comparison_long, aes(x = value, color = name), size = 2) +
geom_dumbbell(data = maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020),
colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1", show.legend = T) +
geom_dumbbell(data = maricopa_comparison_rep, aes(x = votes_pct_2016, xend = votes_pct_2020),
colour_x = "#fdcc8a", size = 2, colour_xend = "#e34a33", colour = "#e3e3e1") +
scale_color_manual(name = "Party: Year", values = c("Dem 2016" = "#bdc9e1", "Dem 2020" = "#1c9099", "Rep 2016" = "#fdcc8a", "Rep 2020" = "#e34a33")) +
labs(x = "Vote Share (%)", y = "Congressional District", title = "Vote Share by Congressional Districts") +
theme_minimal()
## plot
ggplot(maricopa_comparison_dem, aes(y = CD)) +
geom_point(data = maricopa_comparison_long, aes(x = value, color = name, fill = name), size = 2) +
geom_dumbbell(data = maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020),
colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1", show.legend = T) +
geom_dumbbell(data = maricopa_comparison_rep, aes(x = votes_pct_2016, xend = votes_pct_2020),
colour_x = "#fdcc8a", size = 2, colour_xend = "#e34a33", colour = "#e3e3e1") +
scale_color_manual(name = "Party: Year", values = c("Dem 2016" = "#bdc9e1", "Dem 2020" = "#1c9099", "Rep 2016" = "#fdcc8a", "Rep 2020" = "#e34a33")) +
labs(x = "Vote Share (%)", y = "Congressional District", title = "Vote Share by Congressional Districts") +
theme_minimal()
## plot
ggplot(maricopa_comparison_dem, aes(y = CD)) +
geom_point(data = maricopa_comparison_long, aes(x = value, color = name), size = 2) +
geom_dumbbell(data = maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020),
colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1", show.legend = T) +
geom_dumbbell(data = maricopa_comparison_rep, aes(x = votes_pct_2016, xend = votes_pct_2020),
colour_x = "#fdcc8a", size = 2, colour_xend = "#e34a33", colour = "#e3e3e1") +
scale_color_manual(name = "Party: Year", values = c("#BDC9E1", "#1C9099", "#FDCC8A", "#E34A33")) +
labs(x = "Vote Share (%)", y = "Congressional District", title = "Vote Share by Congressional Districts") +
theme_minimal()
## plot
ggplot(maricopa_comparison_dem, aes(y = CD)) +
geom_point(data = maricopa_comparison_long, aes(x = value, color = name), size = 2) +
# geom_dumbbell(data = maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020),
#               colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1", show.legend = T) +
# geom_dumbbell(data = maricopa_comparison_rep, aes(x = votes_pct_2016, xend = votes_pct_2020),
#               colour_x = "#fdcc8a", size = 2, colour_xend = "#e34a33", colour = "#e3e3e1") +
scale_color_manual(name = "Party: Year", values = c("#BDC9E1", "#1C9099", "#FDCC8A", "#E34A33")) +
labs(x = "Vote Share (%)", y = "Congressional District", title = "Vote Share by Congressional Districts") +
theme_minimal()
## plot
ggplot(maricopa_comparison_dem, aes(y = CD)) +
geom_point(data = maricopa_comparison_long, aes(x = value, color = name), size = 2) +
scale_color_manual(name = "Party: Year", values = c("#BDC9E1", "#1C9099", "#FDCC8A", "#E34A33")) +
geom_dumbbell(data = maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020),
colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1", show.legend = T) +
geom_dumbbell(data = maricopa_comparison_rep, aes(x = votes_pct_2016, xend = votes_pct_2020),
colour_x = "#fdcc8a", size = 2, colour_xend = "#e34a33", colour = "#e3e3e1") +
labs(x = "Vote Share (%)", y = "Congressional District", title = "Vote Share by Congressional Districts") +
theme_minimal()
## plot
ggplot(maricopa_comparison_dem, aes(y = CD)) +
geom_point(data = maricopa_comparison_long, aes(x = value, color = name), size = 2) +
# geom_segment(data = maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020), colour = "#e3e3e1")
scale_color_manual(name = "Party: Year", values = c("#BDC9E1", "#1C9099", "#FDCC8A", "#E34A33")) +
geom_dumbbell(data = maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020),
colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1") +
geom_dumbbell(data = maricopa_comparison_rep, aes(x = votes_pct_2016, xend = votes_pct_2020),
colour_x = "#fdcc8a", size = 2, colour_xend = "#e34a33", colour = "#e3e3e1") +
labs(x = "Vote Share (%)", y = "Congressional District", title = "Vote Share by Congressional Districts") +
theme_minimal()
View(maricopa_2016_3parties_congress)
View(maricopa_comparison_rep)
View(maricopa_comparison)
maricopa_comparison <- maricopa_comparison %>%
mutate(`Other 2016` = round(100*total_3p_votes_2016/total_votes_2016),
`Other 2020` = round(100*total_3p_votes_2020/total_votes_2020))
maricopa_comparison_3p <- maricopa_comparison %>%
select(CD, `Other 2016`,`Other 2020`)
maricopa_comparison_3p_long <- maricopa_comparison_3p %>%
pivot_longer(cols = c(`Other 2016`,`Other 2020`))
maricopa_comparison_long <- rbind(maricopa_comparison_dem_long, maricopa_comparison_rep_long, maricopa_comparison_3p_long)
maricopa_comparison_3p_long <- maricopa_comparison_3p %>%
pivot_longer(cols = c(`Other 2016`,`Other 2020`))%>%
unique()
maricopa_comparison_long <- rbind(maricopa_comparison_dem_long, maricopa_comparison_rep_long, maricopa_comparison_3p_long)
## plot
ggplot(maricopa_comparison_dem, aes(y = CD)) +
geom_point(data = maricopa_comparison_long, aes(x = value, color = name), size = 2) +
scale_color_manual(name = "", values = c("#BDC9E1", "#1C9099", "#CCCCCC", "#636363",  "#FDCC8A", "#E34A33")) +
geom_dumbbell(data = maricopa_comparison_dem, aes(x = votes_pct_2016, xend = votes_pct_2020),
colour_x = "#bdc9e1", size = 2, colour_xend = "#1c9099", colour = "#e3e3e1") +
geom_dumbbell(data = maricopa_comparison_rep, aes(x = votes_pct_2016, xend = votes_pct_2020),
colour_x = "#fdcc8a", size = 2, colour_xend = "#e34a33", colour = "#e3e3e1") +
geom_dumbbell(data = maricopa_comparison_3p, aes(x = `Other 2016`, xend = `Other 2020`),
colour_x = "#CCCCCC", size = 2, colour_xend = "#636363", colour = "#e3e3e1") +
labs(x = "Vote Share (%)", y = "Congressional District", title = "Vote Share by Congressional Districts") +
theme_minimal()
View(maricopa_voter_comparison_CD)
View(active_voter_reg_comparison)
View(active_2016_voter_reg)
View(active_2020_voter_reg)
maricopa_2020_voter_registration_CD_long <- maricopa_2020_voter_registration_CD
maricopa_2020_voter_registration_CD_long <- active_2020_voter_reg %>%
select(CD, Rep_20, Dem_20, Others_20)
colnames(maricopa_2020_voter_registration_CD_long) <- c("CD", "Rep", "Dem", "Others")
maricopa_2020_voter_registration_CD_long <- pivot_longer(maricopa_2020_voter_registration_CD_long, cols = Rep:Others)
View(maricopa_2020_voter_registration_CD_long)
maricopa_2020_voter_registration_CD_long <- active_2020_voter_reg %>%
select(CD, Rep_20, Dem_20, Others_20)
maricopa_2020_voter_registration_CD_long$CD <- factor(maricopa_2020_voter_registration_CD_long$CD,
levels = maricopa_2020_voter_registration_CD_long$CD)
colnames(maricopa_2020_voter_registration_CD_long) <- c("CD", "Rep", "Dem", "Others")
maricopa_2020_voter_registration_CD_long <- pivot_longer(maricopa_2020_voter_registration_CD_long, cols = Rep:Others)
# plotting it all together
ggplot(maricopa_2020_voter_registration_CD_long, aes(x = value, y = CD, color = name)) +
geom_point(size = 3) +
scale_color_manual(name = "", values = c("#1C9099", "#636363", "#E34A33")) +
labs(x = "Active Voters", y = "Congressional District", title = "Active Voters by Congressional Districts", subtitle = "AZ voters are split equally among Democrats, Republicans, and others") +
theme_minimal()
mediumr:::medium_create_post_from_Rmd()
mediumr:::medium_create_post_from_Rmd()
mediumr:::medium_create_post_from_Rmd()
Sys.getenv("MEDIUM_API_TOKEN")
mediumr::medium_get_current_user()
library(mediumr)
?medium_request()
medium_user()
?medium_get_current_user
mediumr:::medium_create_post_from_Rmd()
View(active_2020_voter_reg_pct)
View(active_2020_voter_reg)
View(maricopa_2020_voter_registration_CD_long)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(leaflet)
library(sf)
library(ggplot2)
library(mapboxapi)
library(ggalt)
# reading in data
## Maricopa Co. data dump
maricopa_2020_11132020 <- read_tsv("Maricopa_2020_Provisional_111320.txt")
maricopa_2016 <- read_tsv("Maricopa_2016.txt")
## Maricopa Co. Voter Registration by Party
maricopa_2016_party_voter_registration <- read_csv("MaricopaCounty_2016_VoterRegPartyBreakdown.csv")
maricopa_2020_party_voter_registration <- read_csv("MaricopaCounty_2020_VoterRegPartyBreakdown.csv")
## Shapefiles
maricopa_precincts_2018 <- read_sf("./Shapefiles/VotingPrecincts/VotingPrecincts.shp")
maricopa_precincts_2018 <- st_transform(maricopa_precincts_2018, 4326)
maricopa_precincts_2016 <- read_sf("./Shapefiles/VotingPrecincts/HistoricalVotingPrecincts_12thru16.shp")
maricopa_precincts_2016 <- st_transform(maricopa_precincts_2016, 4326)
maricopa_cd <- read_sf("./Shapefiles/CD/MaricopaCD.shp")
maricopa_cd <- st_transform(maricopa_cd, 4326)
colnames(maricopa_cd)[1] <- "CD"
maricopa_2020_voter_registration_pct_CD_long <- active_2020_voter_reg_pct
maricopa_2020_voter_registration_pct_CD_long$CD <- factor(maricopa_2020_voter_registration_pct_CD_long$CD,
levels = maricopa_2020_voter_registration_pct_CD_long$CD)
colnames(maricopa_2020_voter_registration_pct_CD_long) <- c("CD", "Rep", "Dem", "Others")
maricopa_2020_voter_registration_pct_CD_long <- pivot_longer(maricopa_2020_voter_registration_pct_CD_long, cols = Rep:Others)
maricopa_2020_voter_registration_pct_CD_long
maricopa_2020_voter_registration_pct_CD_long$CD <- factor(maricopa_2020_voter_registration_pct_CD_long$CD,
levels = maricopa_2020_voter_registration_pct_CD_long$CD)
colnames(maricopa_2020_voter_registration_pct_CD_long) <- c("CD", "Rep", "Dem", "Others")
maricopa_2020_voter_registration_pct_CD_long <- pivot_longer(maricopa_2020_voter_registration_pct_CD_long, cols = Rep:Others)
maricopa_2020_voter_registration_pct_CD_long2 <- pivot_longer(maricopa_2020_voter_registration_pct_CD_long, cols = Rep:Others)
rlang::last_error()
maricopa_2020_voter_registration_pct_CD_long
View(maricopa_2020_voter_registration_pct_CD_long)
maricopa_2020_voter_registration_pct_CD_long <- active_2020_voter_reg_pct %>%
select(CD, Rep, Dem, Oth, Totals)
maricopa_2020_voter_registration_pct_CD_long <- active_2020_voter_reg_pct %>%
select(CD, Rep_20, Dem_20, Others_20)
maricopa_2020_voter_registration_pct_CD_long$CD <- factor(maricopa_2020_voter_registration_pct_CD_long$CD,
levels = maricopa_2020_voter_registration_pct_CD_long$CD)
colnames(maricopa_2020_voter_registration_pct_CD_long) <- c("CD", "Rep", "Dem", "Others")
View(maricopa_2020_voter_registration_pct_CD_long)
maricopa_2020_voter_registration_pct_CD_long <- pivot_longer(maricopa_2020_voter_registration_pct_CD_long, cols = Rep:Others)
maricopa_2020_voter_registration_CD_long <- inner_join(maricopa_2020_voter_registration_CD_long, maricopa_2020_voter_registration_pct_CD_long)
maricopa_2020_voter_registration_CD_long <- active_2020_voter_reg %>%
select(CD, Rep_20, Dem_20, Others_20)
maricopa_2020_voter_registration_CD_long$CD <- factor(maricopa_2020_voter_registration_CD_long$CD,
levels = maricopa_2020_voter_registration_CD_long$CD)
colnames(maricopa_2020_voter_registration_CD_long) <- c("CD", "Rep", "Dem", "Others")
maricopa_2020_voter_registration_CD_long <- pivot_longer(maricopa_2020_voter_registration_CD_long, cols = Rep:Others)
colnames(maricopa_2020_voter_registration_pct_CD_long)[3] <- "ActiveVoters"
maricopa_2020_voter_registration_pct_CD_long <- active_2020_voter_reg_pct %>%
select(CD, Rep_20, Dem_20, Others_20)
maricopa_2020_voter_registration_pct_CD_long$CD <- factor(maricopa_2020_voter_registration_pct_CD_long$CD,
levels = maricopa_2020_voter_registration_pct_CD_long$CD)
colnames(maricopa_2020_voter_registration_pct_CD_long) <- c("CD", "Rep", "Dem", "Others")
maricopa_2020_voter_registration_pct_CD_long <- pivot_longer(maricopa_2020_voter_registration_pct_CD_long, cols = Rep:Others)
colnames(maricopa_2020_voter_registration_pct_CD_long)[3] <- "Pct"
maricopa_2020_voter_registration_CD_long <- inner_join(maricopa_2020_voter_registration_CD_long,
maricopa_2020_voter_registration_pct_CD_long)
View(maricopa_2020_voter_registration_CD_long)
colnames(maricopa_2020_voter_registration_CD_long)[3] <- "ActiveVoters"
# plotting it all together
ggplotly(ggplot(maricopa_2020_voter_registration_CD_long, aes(x = Pct, y = CD, color = name)) +
geom_point(size = 3) +
scale_color_manual(name = "", values = c("#1C9099", "#636363", "#E34A33")) +
labs(x = "Active Voters (%)", y = "Congressional District", title = "Active Voters by Congressional Districts", subtitle = "AZ voters are split equally among Democrats, Republicans, and others") +
theme_minimal())
library(plotly)
# plotting it all together
ggplotly(ggplot(maricopa_2020_voter_registration_CD_long, aes(x = Pct, y = CD, color = name)) +
geom_point(size = 3) +
scale_color_manual(name = "", values = c("#1C9099", "#636363", "#E34A33")) +
labs(x = "Active Voters (%)", y = "Congressional District", title = "Active Voters by Congressional Districts", subtitle = "AZ voters are split equally among Democrats, Republicans, and others") +
theme_minimal())
# plotting it all together
ggplotly(ggplot(maricopa_2020_voter_registration_CD_long, aes(x = Pct, y = CD, color = name, label = ActiveVoters)) +
geom_point(size = 3) +
scale_color_manual(name = "", values = c("#1C9099", "#636363", "#E34A33")) +
labs(x = "Active Voters (%)", y = "Congressional District", title = "Active Voters by Congressional Districts", subtitle = "AZ voters are split equally among Democrats, Republicans, and others") +
theme_minimal())
